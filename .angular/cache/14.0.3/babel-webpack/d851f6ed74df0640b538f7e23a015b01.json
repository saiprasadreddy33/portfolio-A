{"ast":null,"code":"import { __awaiter } from 'tslib';\nimport { Component, Input, ElementRef, ViewChild, Output, EventEmitter, NgModule } from '@angular/core';\nimport { v4 } from 'uuid';\nimport 'jquery-tagcanvas/tagcanvas';\nimport { CommonModule } from '@angular/common';\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\nconst _c0 = [\"canvas\"];\n\nfunction TagCanvasComponent_a_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"a\", 4);\n    ɵngcc0.ɵɵlistener(\"click\", function TagCanvasComponent_a_3_Template_a_click_0_listener() {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r4);\n      const tag_r2 = restoredCtx.$implicit;\n      const ctx_r3 = ɵngcc0.ɵɵnextContext();\n      return ɵngcc0.ɵɵresetView(ctx_r3.tagClick.next(tag_r2));\n    });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const tag_r2 = ctx.$implicit;\n    ɵngcc0.ɵɵattribute(\"data-weight\", tag_r2.weight);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(tag_r2.text);\n  }\n}\n\nlet TagCanvasComponent = /*#__PURE__*/(() => {\n  class TagCanvasComponent {\n    /**\r\n     * @param {?} elementRef\r\n     */\n    constructor(elementRef) {\n      this.elementRef = elementRef;\n      this._instanceId = v4();\n      this.canvasId = `canvas-${this._instanceId}`;\n      this.tagListId = `tags-${this._instanceId}`;\n      this.defaultOptions = {\n        textFont: null,\n        textColour: null,\n        weightFrom: 'data-weight' // TODO: Hide this field from external modules\n\n      };\n      this.tagClick = new EventEmitter();\n    }\n    /**\r\n     * @param {?} value\r\n     * @return {?}\r\n     */\n\n\n    set options(value) {\n      this._options = value;\n      this.start();\n    }\n    /**\r\n     * @return {?}\r\n     */\n\n\n    get options() {\n      return this._options;\n    }\n    /**\r\n     * @return {?}\r\n     */\n\n\n    ngAfterViewInit() {\n      let\n      /** @type {?} */\n      canvasElement =\n      /** @type {?} */\n      this.canvas.nativeElement;\n      canvasElement.width = Math.round(canvasElement.clientWidth);\n      canvasElement.height = Math.round(canvasElement.clientHeight);\n      let\n      /** @type {?} */\n      style = window.getComputedStyle(this.elementRef.nativeElement);\n      this.defaultOptions.textHeight = parseFloat(style['font-size']);\n      this.start();\n    }\n    /**\r\n     * @return {?}\r\n     */\n\n\n    start() {\n      return __awaiter(this, void 0, void 0, function* () {\n        let\n        /** @type {?} */\n        mergedOptions = Object.assign({}, this.defaultOptions, this._options);\n        yield blinkEyes();\n        TagCanvas.Start(this.canvasId, this.tagListId, mergedOptions);\n      });\n    }\n    /**\r\n     * @return {?}\r\n     */\n\n\n    update() {\n      return __awaiter(this, void 0, void 0, function* () {\n        yield blinkEyes();\n        TagCanvas.Update(this.canvasId);\n      });\n    }\n    /**\r\n     * @return {?}\r\n     */\n\n\n    ngDoCheck() {\n      let\n      /** @type {?} */\n      tagListState = JSON.stringify(this.tags.map(({\n        text: text,\n        weight: weight\n      }) => [text, weight])); // TODO: Improve performance, use KeyValueDiffer/IterableDiffer\n\n      if (this._previousTagListState !== tagListState) {\n        this._previousTagListState = tagListState;\n        this.update();\n      }\n    }\n    /**\r\n     * @return {?}\r\n     */\n\n\n    ngOnDestroy() {\n      TagCanvas.Delete(this.canvasId);\n    }\n\n  }\n\n  TagCanvasComponent.ɵfac = function TagCanvasComponent_Factory(t) {\n    return new (t || TagCanvasComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n  };\n\n  TagCanvasComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: TagCanvasComponent,\n    selectors: [[\"tag-canvas\"]],\n    viewQuery: function TagCanvasComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.canvas = _t.first);\n      }\n    },\n    inputs: {\n      options: \"options\",\n      tags: \"tags\"\n    },\n    outputs: {\n      tagClick: \"tagClick\"\n    },\n    decls: 4,\n    vars: 3,\n    consts: [[3, \"id\"], [\"canvas\", \"\"], [1, \"tag-container\", 3, \"id\"], [\"href\", \"javascript:void(0)\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"href\", \"javascript:void(0)\", 3, \"click\"]],\n    template: function TagCanvasComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"canvas\", 0, 1);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n        ɵngcc0.ɵɵtemplate(3, TagCanvasComponent_a_3_Template, 2, 2, \"a\", 3);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵpropertyInterpolate(\"id\", ctx.canvasId);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵpropertyInterpolate(\"id\", ctx.tagListId);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.tags);\n      }\n    },\n    dependencies: [ɵngcc1.NgForOf],\n    styles: [\"[_nghost-%COMP%]{display:block}canvas[_ngcontent-%COMP%]{display:block;width:100%;height:100%}.tag-container[_ngcontent-%COMP%]{display:none}.tag-container[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{font-family:inherit!important;color:inherit!important;font-size:inherit!important;font-weight:inherit!important}\"]\n  });\n  /** @nocollapse */\n\n  return TagCanvasComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\r\n * \\@description Waits for change detection cycle\r\n * @return {?} Promise<void>\r\n */\n\n\nfunction blinkEyes() {\n  return __awaiter(this, void 0, void 0, function* () {\n    yield new Promise(resolve => setTimeout(() => resolve()));\n  });\n}\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n\nlet TagCanvasModule = /*#__PURE__*/(() => {\n  class TagCanvasModule {}\n\n  TagCanvasModule.ɵfac = function TagCanvasModule_Factory(t) {\n    return new (t || TagCanvasModule)();\n  };\n\n  TagCanvasModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: TagCanvasModule\n  });\n  TagCanvasModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [CommonModule]\n  });\n  return TagCanvasModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(TagCanvasModule, {\n    declarations: function () {\n      return [TagCanvasComponent];\n    },\n    imports: function () {\n      return [CommonModule];\n    },\n    exports: function () {\n      return [TagCanvasComponent];\n    }\n  });\n})();\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n\nclass Tag {\n  /**\r\n   * @param {?=} init\r\n   */\n  constructor(init) {\n    Object.assign(this, init);\n  }\n\n}\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\n\n\nexport { TagCanvasModule, TagCanvasComponent, Tag }; //# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctdGFnY2FudmFzLmpzIiwic291cmNlcyI6WyJuZy10YWdjYW52YXMvc3JjL3RhZy1jYW52YXMvdGFnLWNhbnZhcy5jb21wb25lbnQudHMiLCJuZy10YWdjYW52YXMvc3JjL3RhZy1jYW52YXMvdGFnLWNhbnZhcy5tb2R1bGUudHMiLCJuZy10YWdjYW52YXMvc3JjL3RhZy1jYW52YXMvdGFnLnRzIl0sIm5hbWVzIjpbInV1aWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFxREksWUFBb0IsVUFBc0I7QUFDOUMsUUFEd0IsZUFBVSxHQUFWLFVBQVUsQ0FBWTtBQUFFLDJCQXJDYkEsRUFBSSxFQUFFO0FBQ3pDLHdCQUN3QixVQUFVLElBQUksQ0FBQyxXQUFXLEVBQUU7QUFDcEQseUJBQXlCLFFBQVEsSUFBSSxDQUFDLFdBQVcsRUFBRTtBQUNuRCw4QkFDZ0Q7QUFDaEQsWUFBUSxRQUFRLEVBQUUsSUFBSTtBQUN0QixZQUFRLFVBQVUsRUFBRSxJQUFJO0FBQ3hCLFlBQVEsVUFBVSxFQUFFLGFBQWE7QUFDakMsU0FBSztBQUNMLHdCQXNCa0MsSUFBSSxZQUFZLEVBQUU7QUFDcEQsS0FNSztBQUNMO0FBQ087QUFDTjtBQUFvQjtBQUFTLElBckIxQixJQUNJLE9BQU8sQ0FBQyxLQUF1QjtBQUN2QyxRQUFRLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO0FBQzlCLFFBQVEsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ3JCLEtBQUs7QUFDTDtBQUNPO0FBQ0Q7QUFBUyxJQURYLElBQUksT0FBTztBQUNmLFFBQVEsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0FBQzdCLEtBQUs7QUFDTDtBQUNPO0FBQ0s7QUFBUyxJQVNqQixlQUFlO0FBQU0sUUFDakIscUJBQUksYUFBYSxxQkFBRyxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWtDLENBQUEsQ0FBQztBQUMzRSxRQUFRLGFBQWEsQ0FBQyxLQUFLLEdBQUcs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QUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUlBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUF2RkEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFLQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBYkEsQUFBQSxBQWdDQSxBQUFBLEFBS0EsQUFBQSxBQVVBLEFBQUEsQUFHQSxBQUFBLEFBQUEsQUFBQSxBQWlEQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFDckdBLEFBS0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQ0EsQUNmQSxBQU1BLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFmdGVyVmlld0luaXQsIENvbXBvbmVudCwgRG9DaGVjaywgSW5wdXQsIE9uRGVzdHJveSwgRWxlbWVudFJlZiwgVmlld0NoaWxkLCBPdXRwdXQsIEV2ZW50RW1pdHRlciB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7IHY0IGFzIHV1aWQgfSBmcm9tICd1dWlkJztcclxuaW1wb3J0IHsgVGFnIH0gZnJvbSBcIi4vdGFnXCI7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAndGFnLWNhbnZhcycsXHJcbiAgICB0ZW1wbGF0ZTogYDxjYW52YXMgI2NhbnZhcyBpZD1cInt7IGNhbnZhc0lkIH19XCI+PC9jYW52YXM+XHJcbjxkaXYgaWQ9XCJ7eyB0YWdMaXN0SWQgfX1cIiBjbGFzcz1cInRhZy1jb250YWluZXJcIj5cclxuXHQ8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgKm5nRm9yPVwibGV0IHRhZyBvZiB0YWdzXCJcclxuXHRcdFthdHRyLmRhdGEtd2VpZ2h0XT1cInRhZy53ZWlnaHRcIiAoY2xpY2spPVwidGFnQ2xpY2submV4dCh0YWcpXCI+e3sgdGFnLnRleHQgfX08L2E+XHJcbjwvZGl2PlxyXG5gLFxyXG4gICAgc3R5bGVzOiBbYDpob3N0e2Rpc3BsYXk6YmxvY2t9Y2FudmFze2Rpc3BsYXk6YmxvY2s7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJX0udGFnLWNvbnRhaW5lcntkaXNwbGF5Om5vbmV9LnRhZy1jb250YWluZXI+YXtmb250LWZhbWlseTppbmhlcml0IWltcG9ydGFudDtjb2xvcjppbmhlcml0IWltcG9ydGFudDtmb250LXNpemU6aW5oZXJpdCFpbXBvcnRhbnQ7Zm9udC13ZWlnaHQ6aW5oZXJpdCFpbXBvcnRhbnR9YF1cclxufSlcclxuZXhwb3J0IGNsYXNzIFRhZ0NhbnZhc0NvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIERvQ2hlY2ssIE9uRGVzdHJveSB7XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfaW5zdGFuY2VJZCA9IHV1aWQoKTtcclxuXHJcbiAgICByZWFkb25seSBjYW52YXNJZCA9IGBjYW52YXMtJHt0aGlzLl9pbnN0YW5jZUlkfWA7XHJcbiAgICByZWFkb25seSB0YWdMaXN0SWQgPSBgdGFncy0ke3RoaXMuX2luc3RhbmNlSWR9YDtcclxuXHJcbiAgICByZWFkb25seSBkZWZhdWx0T3B0aW9uczogVGFnQ2FudmFzT3B0aW9ucyA9IHtcclxuICAgICAgICB0ZXh0Rm9udDogbnVsbCxcclxuICAgICAgICB0ZXh0Q29sb3VyOiBudWxsLFxyXG4gICAgICAgIHdlaWdodEZyb206ICdkYXRhLXdlaWdodCcgLy8gVE9ETzogSGlkZSB0aGlzIGZpZWxkIGZyb20gZXh0ZXJuYWwgbW9kdWxlc1xyXG4gICAgfTtcclxuXHJcbiAgICBjYW52YXNXaWR0aDogbnVtYmVyO1xyXG4gICAgY2FudmFzSGVpZ2h0OiBudW1iZXI7XHJcblxyXG4gICAgcHJpdmF0ZSBfb3B0aW9uczogVGFnQ2FudmFzT3B0aW9ucztcclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgdGFnczogVGFnW107XHJcblxyXG4gICAgLy8gVE9ETzogQWRkIHN0cmV0Y2ggKGJvb2xlYW4pIGlucHV0XHJcblxyXG4gICAgQElucHV0KClcclxuICAgIHNldCBvcHRpb25zKHZhbHVlOiBUYWdDYW52YXNPcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuc3RhcnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgb3B0aW9ucygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBAT3V0cHV0KClcclxuICAgIHRhZ0NsaWNrOiBFdmVudEVtaXR0ZXI8VGFnPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAVmlld0NoaWxkKCdjYW52YXMnKVxyXG4gICAgY2FudmFzOiBFbGVtZW50UmVmO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZikge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGNhbnZhc0VsZW1lbnQgPSB0aGlzLmNhbnZhcy5uYXRpdmVFbGVtZW50IGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgICAgIGNhbnZhc0VsZW1lbnQud2lkdGggPSBNYXRoLnJvdW5kKGNhbnZhc0VsZW1lbnQuY2xpZW50V2lkdGgpO1xyXG4gICAgICAgIGNhbnZhc0VsZW1lbnQuaGVpZ2h0ID0gTWF0aC5yb3VuZChjYW52YXNFbGVtZW50LmNsaWVudEhlaWdodCk7XHJcblxyXG4gICAgICAgIGxldCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB0aGlzLmRlZmF1bHRPcHRpb25zLnRleHRIZWlnaHQgPSBwYXJzZUZsb2F0KHN0eWxlWydmb250LXNpemUnXSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhcnQoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgYXN5bmMgc3RhcnQoKSB7XHJcbiAgICAgICAgbGV0IG1lcmdlZE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRPcHRpb25zLCB0aGlzLl9vcHRpb25zKTtcclxuICAgICAgICBhd2FpdCBibGlua0V5ZXMoKTtcclxuICAgICAgICBUYWdDYW52YXMuU3RhcnQodGhpcy5jYW52YXNJZCwgdGhpcy50YWdMaXN0SWQsIG1lcmdlZE9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVwZGF0ZSgpIHtcclxuICAgICAgICBhd2FpdCBibGlua0V5ZXMoKTtcclxuICAgICAgICBUYWdDYW52YXMuVXBkYXRlKHRoaXMuY2FudmFzSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3ByZXZpb3VzVGFnTGlzdFN0YXRlOiBzdHJpbmc7XHJcblxyXG4gICAgbmdEb0NoZWNrKCk6IHZvaWQge1xyXG4gICAgICAgIGxldCB0YWdMaXN0U3RhdGUgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnRhZ3MubWFwKCh7IHRleHQ6IHRleHQsIHdlaWdodDogd2VpZ2h0IH0pID0+IFsgdGV4dCwgd2VpZ2h0IF0pKTsgLy8gVE9ETzogSW1wcm92ZSBwZXJmb3JtYW5jZSwgdXNlIEtleVZhbHVlRGlmZmVyL0l0ZXJhYmxlRGlmZmVyXHJcbiAgICAgICAgaWYgKHRoaXMuX3ByZXZpb3VzVGFnTGlzdFN0YXRlICE9PSB0YWdMaXN0U3RhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5fcHJldmlvdXNUYWdMaXN0U3RhdGUgPSB0YWdMaXN0U3RhdGU7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgICAgIFRhZ0NhbnZhcy5EZWxldGUodGhpcy5jYW52YXNJZCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG4vKipcclxuICAgIEBkZXNjcmlwdGlvbiBXYWl0cyBmb3IgY2hhbmdlIGRldGVjdGlvbiBjeWNsZVxyXG4gICAgQHJldHVybnMgUHJvbWlzZTx2b2lkPlxyXG4qL1xyXG5hc3luYyBmdW5jdGlvbiBibGlua0V5ZXMoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZSgpKSk7XHJcbn1cclxuIiwiaW1wb3J0ICdqcXVlcnktdGFnY2FudmFzL3RhZ2NhbnZhcyc7XHJcbmltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFRhZ0NhbnZhc0NvbXBvbmVudCB9IGZyb20gJy4vdGFnLWNhbnZhcy5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5cclxuQE5nTW9kdWxlKHtcclxuICAgIGRlY2xhcmF0aW9uczogW1xyXG4gICAgICAgIFRhZ0NhbnZhc0NvbXBvbmVudFxyXG4gICAgXSxcclxuICAgIGltcG9ydHM6IFtcclxuICAgICAgICBDb21tb25Nb2R1bGVcclxuICAgIF0sXHJcbiAgICBleHBvcnRzOiBbXHJcbiAgICAgICAgVGFnQ2FudmFzQ29tcG9uZW50XHJcbiAgICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUYWdDYW52YXNNb2R1bGUge1xyXG4gICAgLy8gVE9ETzogRm9yIGdsb2JhbCBvcHRpb25zIGluaXRpYWxpemF0aW9uLCBpbXBsZW1lbnQgYSBmb3JSb290KCkgc3RhdGljIG1ldGhvZCB0aGF0IGFjY2VwdHMgYSBUYWdDYW52YXNPcHRpb25zIGFzIGEgcGFyYW1ldGVyXHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFRhZyB7XHJcbiAgICBcclxuICAgIHRleHQ6IHN0cmluZztcclxuXHJcbiAgICB3ZWlnaHQ/OiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaW5pdD86IFBhcnRpYWw8VGFnPikge1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgaW5pdCk7XHJcbiAgICB9XHJcblxyXG59XHJcbiJdfQ==","map":null,"metadata":{},"sourceType":"module"}